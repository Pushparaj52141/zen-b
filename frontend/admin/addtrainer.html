<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin</title>
    <link rel="stylesheet" href="/frontend/admin/style.css">
    <link rel="stylesheet" href="/frontend/assets/dist/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.5.0/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.min.css">

    <style>
        .card-container {
            display: flex;
            flex-direction: column;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: white;
        }

        .card {
            height: 100%;
            width: 100%;
            display: none;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .card.active {
            display: block;
        }

        .card-title {
            color: #333;
            font-size: small;
        }

        .form-group label {
            font-weight: bold;
            color: #555;
        }

        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
        }

        .btn-primary:hover {
            background-color: #0056b3;
            border-color: #0056b3;
        }

        .rotate-icon {
            transform: rotate(100deg);
        }
    </style>
</head>
<body>
    <!-- Preloader -->
    <div class="preloader-it">
        <div class="la-anim-1"></div>
    </div>
    <!-- /Preloader -->
    <div class="wrapper theme-1-active pimary-color-red">
        <!-- Top Menu Items -->
        <nav class="navbar navbar-inverse navbar-fixed-top">
            <div class="mobile-only-brand pull-left">
                <div class="nav-header pull-left">
                    <div class="logo-wrap">
                        <a href="index.html">
                            <img class="brand-img" src="/frontend/assets/dist/img/logo.png" alt="brand"/>
                            <span class="brand-text">Zen</span>
                        </a>
                    </div>
                </div>
                <a id="toggle_nav_btn" class="toggle-left-nav-btn inline-block ml-20 pull-left" href="javascript:void(0);"><i class="zmdi zmdi-menu"></i></a>
                <a id="toggle_mobile_search" data-toggle="collapse" data-target="#search_form" class="mobile-only-view" href="javascript:void(0);"><i class="zmdi zmdi-search"></i></a>
                <a id="toggle_mobile_nav" class="mobile-only-view" href="javascript:void(0);"><i class="zmdi zmdi-more"></i></a>
                <form id="search_form" role="search" class="top-nav-search collapse pull-left">
                    <div class="input-group">
                        <input type="text" name="example-input1-group2" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                            <button type="button" class="btn btn-default" data-target="#search_form" data-toggle="collapse" aria-label="Close" aria-expanded="true"><i class="zmdi zmdi-search"></i></button>
                        </span>
                    </div>
                </form>
            </div>
            <div id="mobile_only_nav" class="mobile-only-nav pull-right">
                <ul class="nav navbar-right top-nav pull-right">
                    <li>
                        <a id="open_right_sidebar" href="#"><i class="zmdi zmdi-settings top-nav-icon"></i></a>
                    </li>
                    <li class="dropdown app-drp">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="zmdi zmdi-apps top-nav-icon"></i></a>
                        <ul class="dropdown-menu app-dropdown" data-dropdown-in="slideInRight" data-dropdown-out="flipOutX">
                            <li>
                                <div class="app-nicescroll-bar">
                                    <ul class="app-icon-wrap pa-10">
                                        <li>
                                            <a href="https://mail.google.com/" class="connection-item">
                                                <i class="zmdi zmdi-email-open txt-success"></i>
                                                <span class="block">e-mail</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="calendar.html" class="connection-item">
                                                <i class="zmdi zmdi-calendar-check txt-primary"></i>
                                                <span class="block">calendar</span>
                                            </a>
                                        </li>
                                        <li>
                                            <a href="contact-card.html" class="connection-item">
                                                <i class="zmdi zmdi-assignment-account"></i>
                                                <span class="block">contact</span>
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li>
                                <div class="app-box-">
                                    <hr class="light-grey-hr ma-0"/>
                                    <a class="block text-center read-all" href="javascript:void(0)"> more </a>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown alert-drp">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="zmdi zmdi-notifications top-nav-icon"></i><span class="top-nav-icon-badge">5</span></a>
                        <ul class="dropdown-menu alert-dropdown" data-dropdown-in="bounceIn" data-dropdown-out="bounceOut">
                            <li>
                                <div class="notification-box-head-wrap">
                                    <span class="notification-box-head pull-left inline-block">notifications</span>
                                    <a class="txt-danger pull-right clear-notifications inline-block" href="javascript:void(0)"> clear all </a>
                                    <div class="clearfix"></div>
                                    <hr class="light-grey-hr ma-0"/>
                                </div>
                            </li>
                            <li>
                                <div class="streamline message-nicescroll-bar">
                                    <div class="sl-item">
                                        <a href="javascript:void(0)">
                                            <div class="icon bg-green">
                                                <i class="zmdi zmdi-flag"></i>
                                            </div>
                                            <div class="sl-content">
                                                <span class="inline-block capitalize-font pull-left truncate head-notifications">
                                                New Enquiry Added:</span>
                                                <span class="inline-block font-11 pull-right notifications-time">2pm</span>
                                                <div class="clearfix"></div>
                                                <p class="truncate">Stay informed! You've just received a new enquiry.</p>
                                            </div>
                                        </a>
                                    </div>
                                    <div class="sl-item">
                                        <a href="javascript:void(0)">
                                            <div class="icon bg-blue">
                                                <i class="zmdi zmdi-email"></i>
                                            </div>
                                            <div class="sl-content">
                                                <span class="inline-block capitalize-font pull-left truncate head-notifications">Update</span>
                                                <span class="inline-block font-11 pull-right notifications-time">4pm</span>
                                                <div class="clearfix"></div>
                                                <p class="truncate"> Ranjith has been moved to the enrollment card</p>
                                            </div>
                                        </a>
                                    </div>
                                    <hr class="light-grey-hr ma-0"/>
                                    <div class="sl-item">
                                        <a href="javascript:void(0)">
                                            <div class="icon bg-red">
                                                <i class="zmdi zmdi-storage"></i>
                                            </div>
                                            <div class="sl-content">
                                                <span class="inline-block capitalize-font pull-left truncate head-notifications txt-danger">Server Space Update</span>
                                                <span class="inline-block font-11 pull-right notifications-time">1pm</span>
                                                <div class="clearfix"></div>
                                                <p class="truncate">Currently, 70% of server space is available.</p>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <div class="notification-box-bottom-wrap">
                                    <hr class="light-grey-hr ma-0"/>
                                    <a class="block text-center read-all" href="javascript:void(0)"> read all </a>
                                    <div class="clearfix"></div>
                                </div>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown auth-drp">
                        <a href="#" class="dropdown-toggle pr-0" data-toggle="dropdown"><img src="/frontend/assets/dist/img/user1.jpg" alt="user_auth" class="user-auth-img img-circle"/><span class="user-online-status"></span></a>
                        <ul class="dropdown-menu user-auth-dropdown" data-dropdown-in="flipInX" data-dropdown-out="flipOutX">
                            <li>
                                <a><i class="zmdi zmdi-account"></i><span>Profile</span></a>
                            </li>
                            <li>
                                <a href="#"><i class="zmdi zmdi-card"></i><span>My Tasks</span></a>
                            </li>
                            <li>
                                <a href="https://mail.google.com/"><i class="zmdi zmdi-email"></i><span>Inbox</span></a>
                            </li>
                            <li>
                                <a href="#"><i class="zmdi zmdi-settings"></i><span>Settings</span></a>
                            </li>
                            <li>
                                <a href="#"><i class="zmdi zmdi-power"></i><span>Log Out</span></a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
        <!-- /Top Menu Items -->

        <!-- Left Sidebar Menu -->
        <div class="fixed-sidebar-left">
            <ul class="nav navbar-nav side-nav nicescroll-bar">
                <li class="navigation-header">
                    <span>Main</span>
                    <i class="zmdi zmdi-more"></i>
                </li>
                <li>
                    <a href="addlead.html">
                        <div class="pull-left">
                            <i class="bi bi-person-plus" style="color:red"></i>
                            <span class="right-nav-text">Add Lead</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="addtrainer.html">
                        <div class="pull-left">
                            <i class="bi bi-person-badge" style="color:purple"></i>
                            <span class="right-nav-text">Add Trainer</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                
                <li>
                    <a href="enquiry.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-email text-danger"></i>
                            <span class="right-nav-text">Enquiries</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="enrollment.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-check-circle text-warning"></i>
                            <span class="right-nav-text">Enrollment</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="training-progress.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-book text-success"></i>
                            <span class="right-nav-text">Training Progress</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="hands-on-project.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-laptop text-primary"></i>
                            <span class="right-nav-text">Hands On Projects</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="certificate-completion.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-file-text text-pink"></i>
                            <span class="right-nav-text">Certificate Completion</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="cv-build.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-account-box" style="color:#7a1e8a;"></i>
                            <span class="right-nav-text">CV Build</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="mock-interviews.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-mic" style="color: #00bffe;"></i>
                            <span class="right-nav-text">Mock Interviews</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>
                <li>
                    <a href="placement.html">
                        <div class="pull-left">
                            <i class="zmdi zmdi-case" style="color:#267f00"></i>
                            <span class="right-nav-text">Placement</span>
                        </div>
                        <div class="clearfix"></div>
                    </a>
                </li>

            </ul>
        </div>
        <!-- /Left Sidebar Menu -->

        <div class="page-wrapper">
            <div class="container-fluid">
                <div class="container-fluid">
            
<!-- Add Trainer Modal -->
<div class="container mt-5">
    <button id="addTrainerBtn" class="btn btn-primary" data-toggle="modal" data-target="#addTrainerModal">Add Trainer</button>
    <div id="adminMessage"></div>

    <div class="modal fade" id="addTrainerModal" tabindex="-1" aria-labelledby="addTrainerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addTrainerModalLabel">Add Trainer</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="addTrainerForm">
                        <div class="form-group">
                            <label for="trainerUsername">Trainer Username</label>
                            <input type="text" id="trainerUsername" name="username" class="form-control" required>
                            <div class="invalid-feedback">Username is required.</div>
                        </div>
                        <div class="form-group">
                            <label for="trainerPassword">Password</label>
                            <input type="password" id="trainerPassword" name="password" class="form-control" required>
                            <div class="invalid-feedback">Password is required.</div>
                            <small id="passwordHelp" class="form-text text-muted">Password must be at least 8 characters long.</small>
                        </div>
                        <button type="submit" class="btn btn-primary">Add Trainer</button>
                    </form>
                    <div id="preloader" class="text-center mt-3">
                        <div class="spinner-border text-primary" role="status">
                            <span class="sr-only">Loading...</span>
                        </div>
                    </div>
                    <div id="adminMessage" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- jQuery -->
<script src="/frontend/assets/vendors/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="/frontend/assets/vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- Additional JavaScript -->
<script>
    $(document).ready(function () {
        $('#addTrainerForm').on('submit', async function (event) {
            event.preventDefault();

            // Form validation
            let isValid = true;
            $('#addTrainerForm input').each(function () {
                if (!this.checkValidity()) {
                    isValid = false;
                    $(this).addClass('is-invalid');
                } else {
                    $(this).removeClass('is-invalid');
                }
            });

            if (!isValid) {
                return;
            }

            const username = $('#trainerUsername').val();
            const password = $('#trainerPassword').val();
            const token = localStorage.getItem('token');

            $('#preloader').show();
            $('#adminMessage').text('');

            try {
                const response = await fetch('http://localhost:5000/addTrainer', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({ username, password })
                });

                const result = await response.json();

                if (result.success) {
                    $('#adminMessage').text('Trainer added successfully!').removeClass('text-danger').addClass('text-success');
                    $('#addTrainerModal').modal('hide'); // Use jQuery to hide the modal
                    $('#addTrainerForm')[0].reset(); // Reset the form fields
                } else {
                    $('#adminMessage').text(result.message).removeClass('text-success').addClass('text-danger');
                }
            } catch (error) {
                console.error('Error:', error);
                $('#adminMessage').text('An error occurred. Please try again.').removeClass('text-success').addClass('text-danger');
            } finally {
                $('#preloader').hide();
            }
        });

        // Reset form and messages when the modal is opened
        $('#addTrainerModal').on('show.bs.modal', function () {
            $('#addTrainerForm')[0].reset();
            $('#adminMessage').text('');
            $('#addTrainerForm input').removeClass('is-invalid');
        });
    });
</script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.15.5/dist/sweetalert2.all.min.js"></script>
    <script src="admin.js"></script>
    <!-- jQuery -->
    <script src="/frontend/assets/vendors/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/frontend/assets/vendors/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Slimscroll JavaScript -->
    <script src="/frontend/assets/dist/js/jquery.slimscroll.js"></script>
    <!-- Fancy Dropdown JS -->
    <script src="/frontend/assets/dist/js/dropdown-bootstrap-extended.js"></script>
    <!-- Init JavaScript -->
    <script src="/frontend/assets/dist/js/init.js"></script>

</body>
</html>
